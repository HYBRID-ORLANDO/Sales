/**
 * YTV - YouTube video player with playlist and repeat options
 * @version 1.0
 * @jQuery version 1.8.3
 * @author Constantin Boiangiu <info@constantinb.com>
 * @copyright Constantin Boiangiu
 *
 * This is not a free script, please purchase your copy from CodeCanyon (http://www.codecanyon.net).
 */function onYouTubePlayerAPIReady(){YT_API_LOADED=!0}(function(e){e.fn.YTV=function(t){if(this.length>1){this.each(function(){e(this).YTV(t)});return this}var n={items:null,playerConfig:{showRelated:0,showSearch:0,showInfo:0},videoContainer:null,playlist:{selector:".playlist",scrollbar:".scrollbar"},infoPanel:null,togglePlaylist:null,toggleRepeat:null,clickStart:!0,volume:30,repeatPlaylist:!1,playOnLoad:!1,rewindVideo:!1,forceHTML5Player:!0,onVideoStateChange:function(){}},t=e.extend({},n,t),r=this,i=!1,s=[],o=[],u=!1,a=!1,f=e(this).find(t.videoContainer),l=e(f).height(),c=e(this).find(t.playlist.selector),h=e(this).find(t.togglePlaylist),p=e(this).find(t.toggleRepeat),d=e(this).find(t.infoPanel),v=-1,m=!1,g=!1,y=null,b=!1,w=!1;e(f).addClass("loading");var E=function(){S();P();if(s.length==0){if(o.length==0)return r;a||e(o[0]).trigger("click")}B();H();s.length>0&&D(s);r.listScroll=e(c).OverflowScroll({children:"li:not(:hidden)",onRefresh:function(){e(t.playlist.scrollbar).slider("option","max",this.items.length);e(t.playlist.scrollbar).slider("option","value",this.items.length);if(this.enabledScroll){e(t.playlist.scrollbar).show();e(c).addClass("has-scroll")}else{e(t.playlist.scrollbar).hide();e(c).removeClass("has-scroll")}},onReady:function(){var n=this.items.length;e(t.playlist.scrollbar).slider({orientation:"vertical",min:0,max:n,value:n,slide:function(e,t){var n=r.listScroll.items.length-t.value;r.listScroll.gotoEl(n)}});if(!this.enabledScroll){e(t.playlist.scrollbar).hide();e(c).removeClass("has-scroll")}}});return r},S=function(){var n=e(r).find(t.items);i=n;e.each(n,function(t,n){var r=e.parseJSON(e(this).attr("rel").replace(/\'/g,'"'));r.vidId?s.push(n):(r.playlistId||r.query||r.userId)&&o.push(n)})},x=function(n){var i=_();m=i.cid;g=i.pid;f.empty().attr("id",m).append('<div id="'+g+'"></div>').data("ref",r);if(t.forceHTML5Player){N({success:!1});return}var s=e(n).data("vid");e(n).addClass("selected");var o={enablejsapi:1,modestbranding:t.playerConfig.modestbranding,iv_load_policy:3,autohide:0,controls:t.playerConfig.controls,hd:1,rel:t.playerConfig.showRelated,showinfo:t.playerConfig.showInfo,showsearch:t.playerConfig.showSearch,playerapiid:g,volume:s.volume||t.volume,width:"100%",height:"100%",play:!s.paused,playerapiid:g},u={allowfullscreen:"true",wmode:"transparent",allowScriptAccess:"always"},a={id:g,name:g},l="http://www.youtube.com/v/"+s.vidId+"&version=3";swfobject.embedSWF(l,g,"100%","100%","8",!1,o,u,a,N);j(7)},T=function(){if(!YT_API_LOADED)return;var n=e(u).data("vid"),i={enablejsapi:1,modestbranding:t.playerConfig.modestbranding,iv_load_policy:3,autohide:0,controls:t.playerConfig.controls,hd:1,rel:t.playerConfig.showRelated,showinfo:t.playerConfig.showInfo,showsearch:t.playerConfig.showSearch,playerapiid:g,volume:n.volume||t.volume,width:"100%",height:"100%",play:!n.paused,playerapiid:g};new YT.Player(g,{height:"100%",width:"100%",videoId:n.vidId,playerVars:i,events:{onReady:function(n){b=n.target;b.setVolume(t.volume);y=1;r.updateStatus(1);e(f).removeClass("loading")},onStateChange:function(e){var t=e.data;switch(t){case-1:r.updateStatus(6);break;case 0:r.updateStatus(4);break;case 1:r.updateStatus(2);break;case 2:case 5:r.updateStatus(3);break;case 3:r.updateStatus(5)}}}})},N=function(t){if(t.success)return;j(7);e.getScript("http://www.youtube.com/player_api");if(!YT_API_LOADED){setTimeout(function(){T()},1e3);return}},C=function(n){u=n;if(!m){x(n);return}if(!O())return;var s=e(n).data("vid"),o=M();o.cueVideoById(s.vidId,0,"default");s.repeat&&!s.paused?o.playVideo():s.paused?t.clickStart&&!s.paused?o.playVideo():t.repeatPlaylist&&!w&&o.playVideo():o.playVideo();r.listScroll.gotoEl(e.inArray(n,i));1==v&&e(h).trigger("click")},k=function(){O()&&M().pauseVideo()},L=function(){O()&&M().playVideo()},A=function(){if(O()){var n=e(u).data("vid"),r=n.volume>=0?n.volume:t.volume;M().setVolume(r)}},O=function(){return!m||null==y?!1:!0},M=function(){return b?b:document.getElementById(g)},_=function(){var e="CCVP_VideoPlayerContainer_",t="CCVP_VideoPlayer_",n=Math.floor(Math.random()*1e3),r={};r.cid=e+n;r.pid=t+n;return r},D=function(n){if(n.lenght>0)return;var r=u?!1:n[0];e.each(n,function(n,i){var o=e.parseJSON(e(this).attr("rel").replace(/\'/g,'"'));e(this).removeAttr("rel").addClass("single_video");o.volume=parseInt(o.volume||t.volume);o.selected=parseInt(o.selected||0);o.paused=parseInt(o.paused||0);o.repeat=parseInt(o.repeat||0);o.repeat&&e(this).addClass("link_repeat");e("<a></a>",{"class":"repeat tooltipped"+(o.repeat?" repeat_on":""),href:"#",title:"toggle video repeat"}).click(function(t){t.preventDefault();if(o.repeat){e(this).removeClass("repeat_on");e(i).removeClass("link_repeat")}else{e(this).addClass("repeat_on");e(i).addClass("link_repeat")}o.repeat=o.repeat?0:1}).insertAfter(e(i));o.title=e(i).text();e(i).data("vid",o);e(i).click(function(t){t.preventDefault();v==1&&(w=!0);C(this);e(s).removeClass("selected");e(this).addClass("selected")});1==o.selected&&(r=i)});!O()&&!u&&r&&C(r);if(r){var i=e(r).data("vid");if(!i.paused)var o=function(){if(!O())return;L();clearInterval(a)},a=setInterval(o,500)}if(t.playOnLoad&&!O())var o=function(){if(!O())return;L();clearInterval(a)},a=setInterval(o,500)},P=function(){if(o.length<=0)return;var t="http://gdata.youtube.com/feeds/api/",n={user:{url:t+"users/#usrnm#/uploads/?callback=?",data:{v:"2",alt:"json",orderby:"published"}},playlist:{url:t+"playlists/#usrnm#?callback=?",data:{v:"2",alt:"json",orderby:"position"}},query:{url:t+"videos?callback=?",data:{q:"",v:"2",alt:"json",relevance_lang_languageCode:"en",orderby:"relevance"}}};e.each(o,function(t,i){var s=e.parseJSON(e(this).attr("rel").replace(/\'/g,'"')),o=!1,u=!1;if(s.userId){u="user";o=s.userId}else if(s.playlistId){u="playlist";o=s.playlistId}else if(s.query){u="query";n.query.data.q=s.query}var a=n[u].data,f=n[u].url.replace("#usrnm#",encodeURIComponent(o));s.results&&(a["max-results"]=s.results>50?50:s.results);s.loadIfNext=parseInt(s.loadIfNext||0);s.autoload=parseInt(s.autoload||0);e(i).data("listData",s);e(i).attr("rel","");e(this).click(function(t){t.preventDefault();e(this).unbind("click");e(this).click(function(e){e.preventDefault()});e(this).attr({rel:""}).addClass("loading");e.getJSON(f,a,function(t){var n=t.feed.entry;e(i).removeClass("loading").addClass("loaded").addClass("open");var s=[],o=[];e.each(n,function(t,n){var r=e("<a></a>",{href:"#",text:n.media$group.media$title.$t,"class":"single_video",rel:"{'vidId':'"+n.media$group.yt$videoid.$t+"','paused':'0'}"}),u=e("<li></li>").append(r).insertAfter(e(i).parent());s[t]=r;o[t]=u});r.listScroll.refresh();D(s);e(i).data("loaded",!0);F();e(i).click(function(t){e(this).hasClass("open")?e(this).removeClass("open").addClass("closed"):e(this).removeClass("closed").addClass("open");e.each(o,function(){e(this).toggle()});r.listScroll.refresh()})})});s.autoload&&e(this).trigger("click")})},H=function(){var n=e(p),r="playlist_repeat_on",i=t.repeatPlaylist?r:"";n.addClass(i).click(function(n){n.preventDefault();if(t.repeatPlaylist){t.repeatPlaylist=!1;e(this).removeClass(r)}else{t.repeatPlaylist=!0;e(this).addClass(r)}})},B=function(){var n=300,i=500,s=!1,o=!1;e(h).click(function(n){n.preventDefault();if(-1==v){e(c).show();r.listScroll.refresh();e(f).css({height:0});r.listScroll.enabledScroll&&e(t.playlist.scrollbar).show();e(this).addClass("playlist_on");s=y;o=u;k()}else{e(c).hide();e(f).css({height:l});e(t.playlist.scrollbar).hide();e(this).removeClass("playlist_on");2==s&&u===o&&L()}v*=-1})},j=function(n){var o="",a="",f=e(u).data("vid");switch(n){case 1:case 6:o="<em>"+f.title+"</em>";A();a="ready";break;case 2:o="Playing <strong>"+f.title+"</strong>"+(f.repeat?" (repeat on)":"");a="playing";1==v&&e(h).trigger("click");break;case 3:o="<em>"+f.title+"</em>";a="paused";break;case 4:o=f.title+" - ended";a="ended";if(1==f.repeat){o="Replaying "+f.title;L();return}if(!t.repeatPlaylist){if(t.rewindVideo){M().seekTo(0,!0);k()}return}var l=e.makeArray(i);index=e.inArray(u,l),nextIndex=index+1>=i.length?0:index+1;for(var c=nextIndex;c<i.length;c++){var p=l[c],m=e(p).data("listData");if(!m){e(p).trigger("click");break}if(e(p).data("loaded")){var g=c+1>=i.length?0:c+1;e(l[g]).trigger("click");break}if(m.loadIfNext&&!e(p).data("loaded")){e(p).trigger("click");var y=setInterval(function(){if(e(p).data("loaded")){j(4);clearInterval(y)}},500);break}if(m.loadIfNext&&e(p).data("loaded")){F();var b=e.inArray(u,s);if(-1!==b&&b+1<s.length){var w=s[b+1];e(w).trigger("click")}break}}break;case 5:o="<em>"+f.title+" ready</em>";A();a="buffering";break;case 7:o="Loading player";a="loading_player"}t.onVideoStateChange.call(r,n,f);e(d).html(o).removeClass("ready playing paused ended buffering loading_player").addClass(a)},F=function(){s=e(r).find(t.items+".single_video");i=e(r).find(t.items+":not(.repeat)")};this.updateStatus=function(t){j(t);1==t&&e(f).removeClass("loading");y=t};return E()}})(jQuery);var CCVP_YT_PLAYERS={},onYouTubePlayerReady=function(e){var t=e.replace("CCVP_VideoPlayer_","#CCVP_VideoPlayerContainer_"),n=jQuery(t).data("ref");n.updateStatus(1);var r=document.getElementById(e),i="yt"+Math.floor(Math.random()*1e5);CCVP_YT_PLAYERS[i]={idPlayer:e,onStateChanged:function(e){switch(e){case-1:n.updateStatus(6);break;case 0:n.updateStatus(4);break;case 1:n.updateStatus(2);break;case 2:case 5:n.updateStatus(3);break;case 3:n.updateStatus(5)}}};r.addEventListener("onStateChange","CCVP_YT_PLAYERS."+i+".onStateChanged")},YT_API_LOADED=!1;(function(e){e.fn.OverflowScroll=function(t){if(this.length>1){this.each(function(){e(this).OverflowScroll(t)});return this}var n={children:!1,onReady:function(){},onRefresh:function(){}},t=e.extend({},n,t),r=t.children?e(this).find(t.children):e(this).children(),i=r.length,s=this,o=[],u=e(this).height();s.enabledScroll=!1;var a=function(){s.slideKey=0;f();t.onReady.call(s);return s};this.refresh=function(){r=t.children?e(s).find(t.children):e(s).children();i=r.length;u=e(s).height();f();t.onRefresh.call(s)};var f=function(){s.items=r;var t=0;o=[];e.each(r,function(n){var r=e(this).outerHeight(!0);o[n]=r;t+=r;s.enabledScroll=t>u})},l=function(t){if("number"==e.type(t))var n=t;else var n=e.inArray(t,r);if(n<0||n>=r.length)return;s.slideKey=n;var i=0;for(var u=0;u<n;u++)i+=o[u];e(s).animate({scrollTop:i},{queue:!1,duration:200});return r[n]};this.gotoEl=function(e){return l(e)};this.gotoNext=function(e){if(!s.enabledScroll)return!1;var t=s.slideKey+e;if(t>=i){s.slideKey=i-1;return{element:r[s.slideKey],index:s.slideKey}}if(t<0){s.slideKey=0;return{element:r[s.slideKey],index:s.slideKey}}var n=l(t);return{element:n,index:t}};return a()}})(jQuery);(function(e){e(window).load(function(){var t={videoContainer:".YTV_playback",playerConfig:{showRelated:0,showSearch:0,showInfo:0,modestbranding:1,controls:1},items:".YTV_playlist li",clickStart:!0,volume:80,repeatPlaylist:!0,playOnLoad:!1,forceHTML5Player:!0};e(".trailers").YTV(t)})})(jQuery);